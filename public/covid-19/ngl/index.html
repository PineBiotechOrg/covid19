<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        overflow: hidden;
        margin: 0;
        padding: 0;
      }
    </style>
    <script src="https://cdn.rawgit.com/arose/ngl/v2.0.0-dev.32/dist/ngl.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        // Create NGL Stage object
        var stage = new NGL.Stage("viewport");

        // Handle window resizing
        window.addEventListener(
          "resize",
          function(event) {
            stage.handleResize();
          },
          false
        );

        // Code for example: color/electrostatic

        // stage.loadFile("QHD43421.pdb.gz").then(function(o) {
        //   o.addRepresentation("surface", {
        //     sele: "polymer",
        //     colorScheme: "electrostatic",
        //     colorDomain: [-0.3, 0.3],
        //     surfaceType: "av"
        //   });
        //   o.autoView();
        // });

        // create tooltip element and add to the viewer canvas
        var tooltip = document.createElement("div");
        Object.assign(tooltip.style, {
          display: "none",
          position: "absolute",
          zIndex: 10,
          pointerEvents: "none",
          backgroundColor: "rgba(0, 0, 0, 0.6)",
          color: "lightgrey",
          padding: "0.5em",
          fontFamily: "sans-serif"
        });
        stage.viewer.container.appendChild(tooltip);

        // load a structure file
        // stage.loadFile("QHD43421.pdb.gz", { defaultRepresentation: true });

        stage.loadFile("QHD43421.pdb.gz").then(function(o) {
          o.addRepresentation("surface", {
            sele: "polymer",
            colorScheme: "electrostatic",
            colorDomain: [-0.3, 0.3],
            surfaceType: "av"
          });
          o.autoView();
        });



        // listen to `hovered` signal to move tooltip around and change its text
        stage.signals.hovered.add(function(pickingProxy) {
          if (pickingProxy && (pickingProxy.atom || pickingProxy.bond)) {
            var atom = pickingProxy.atom || pickingProxy.closestBondAtom;
            var cp = pickingProxy.canvasPosition;
            tooltip.innerText = "ATOM: " + atom.qualifiedName();
            tooltip.style.bottom = cp.y + 3 + "px";
            tooltip.style.left = cp.x + 3 + "px";
            tooltip.style.display = "block";
          } else {
            tooltip.style.display = "none";
          }
        });
      });
    </script>
  </head>
  <body>
    <div id="viewport" style="width:100%; height:100%;"></div>
  </body>
</html>
